import{d as c,x as e}from"./index-d5c16861.js";import{s as i}from"./statusStore-6c5ae981.js";const s=i(),d=c("cartStore",{state:()=>({cart:{carts:[]}}),actions:{addToCart(t,a=1){const r="https://vue3-course-api.hexschool.io/api/aromamystery-api/cart",o={product_id:t,qty:a};s.cartLoadingItem=t,e.post(r,{data:o}).then(n=>{this.getCart(),s.cartLoadingItem="",s.pushMessage({style:"success",title:"已加入購物車",content:"成功加入購物車"})})},getCart(){const t="https://vue3-course-api.hexschool.io/api/aromamystery-api/cart";s.isLoading=!0,e.get(t).then(a=>{this.cart=a.data.data,s.isLoading=!1})},updateCart(t){t.qty<=1?t.qty=1:t.qty>=30&&(t.qty=30);const a=`https://vue3-course-api.hexschool.io/api/aromamystery-api/cart/${t.id}`,r={product_id:t.product_id,qty:t.qty};s.isLoading=!0,s.cartLoadingItem=t.id,e.put(a,{data:r}).then(o=>{this.getCart(),s.pushMessage({style:"success",title:"已更新購物車",content:"成功更新購物車"}),s.isLoading=!1,s.cartLoadingItem=""})},removeFromCart(t){const a=`https://vue3-course-api.hexschool.io/api/aromamystery-api/cart/${t}`;s.isLoading=!0,s.cartLoadingItem=t,e.delete(a).then(r=>{this.getCart(),s.pushMessage({style:"success",title:"已移除商品",content:"成功移除商品"}),s.isLoading=!1,s.cartLoadingItem=""})},removeAllCart(){const t="https://vue3-course-api.hexschool.io/api/aromamystery-api/carts";s.isLoading=!0,e.delete(t).then(a=>{this.getCart(),s.pushMessage({style:"success",title:"已清空購物車",content:"成功清空購物車"}),s.isLoading=!1})}},getters:{getCartItems:t=>t.cart.carts}});export{d as c};
