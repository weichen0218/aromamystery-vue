import{_ as u}from"./_plugin-vue_export-helper-c27b6911.js";import{g as m,o as t,c,h as g,b as s,n as a,j as n,e as r,F as h,r as y,t as e}from"./index-0872f673.js";const f={data(){return{order:{},user:{},orderId:"",isLoading:!1}},methods:{getOrder(){const l=`https://vue3-course-api.hexschool.io/api/aromamystery-api/order/${this.orderId}`;this.$http.get(l).then(d=>{d.data.success&&(this.order=d.data.order,this.order.time=new Date(this.order.create_at*1e3).toLocaleString("zh-TW",{hour12:!1}),this.user=this.order.user,console.log(this.order),console.log(this.order.time))})},payOrder(){const l=`https://vue3-course-api.hexschool.io/api/aromamystery-api/pay/${this.orderId}`;this.$http.post(l).then(d=>{console.log(d),d.data.success&&this.getOrder()})}},created(){this.orderId=this.$route.params.orderId,console.log(this.order),this.getOrder()}},b={class:"container",id:"checkout"},x={key:0,class:"row g-0 p-3 text-center"},k={class:"steps row g-0 list-unstyled mb-4"},v=s("li",{class:"col-4"},[s("small",{class:"ls-3 d-block"},"STEP1"),s("span",null,"確認訂單")],-1),w=s("small",{class:"ls-3 d-block"},"STEP2",-1),T=s("span",null,"建立訂單",-1),N=[w,T],L=s("small",{class:"ls-3 d-block"},"STEP3",-1),O=s("span",null,"完成訂單",-1),C=[L,O],E={class:"row g-0 justify-content-between"},I={class:"col-md-6 col-lg-5 px-3 m-0"},S={class:"fs-4 d-flex mb-5"},V={key:0,class:"text-danger"},B={key:1,class:"text-success"},D={class:"table table-warm table-borderless align-middle"},P={class:"tbody"},j={width:"80",class:"ps-0"},z=["src"],F={class:"text-muted"},q={class:"d-block"},M={class:"text-end"},U={class:"text-primary border-top"},W={class:"fs-4"},A={class:"col-md-6 p-4 py-5 p-md-5 bg-white"},G=s("h2",{class:"fs-4 d-flex mb-4"},"訂購資訊",-1),H={class:"list-unstyled"},J={class:"d-flex"},K=s("p",{class:"col-4"},"訂單金額：",-1),Q={class:"fs-5"},R={class:"d-flex"},X=s("p",{class:"col-4 text-nowrap"},"訂單編號：",-1),Y={class:"col"},Z={class:"d-flex"},$=s("p",{class:"col-4"},"訂購時間：",-1),ss={class:"col"},os={key:0,class:"d-flex"},es=s("p",{class:"col-4"},"優惠券代碼：",-1),ts={class:"col"},cs={class:"d-flex"},ls=s("p",{class:"col-4"},"Email：",-1),ds={class:"col"},is={class:"d-flex"},rs=s("p",{class:"col-4"},"收件人姓名：",-1),as={class:"col"},ns={class:"d-flex"},_s=s("p",{class:"col-4"},"聯絡電話",-1),hs={class:"col"},ps={class:"d-flex"},us=s("p",{class:"col-4"},"收件地址：",-1),ms={class:"col"},gs={class:"d-flex"},ys=s("p",{class:"col-4"},"備註：",-1),fs={key:0,class:"col"},bs={key:1,class:"col"};function xs(l,d,ks,vs,o,_){const p=m("Loading");return t(),c(h,null,[g(p,{active:o.isLoading},null,8,["active"]),s("div",b,[o.order.id?(t(),c("div",x,[s("ul",k,[v,s("li",{class:a(["col-4 mx-3",o.order.is_paid?"":"active"])},N,2),s("li",{class:a(["col-4",o.order.is_paid?"active":""])},C,2)])])):n("",!0),s("div",E,[s("div",I,[s("h2",S,[r(" 訂單內容  "),o.order.is_paid?(t(),c("span",B,"(已付款)")):(t(),c("span",V,"(未付款)"))]),s("table",D,[s("tbody",P,[(t(!0),c(h,null,y(o.order.products,i=>(t(),c("tr",{key:i.id},[s("td",j,[s("img",{class:"table-img",src:i.product.imageUrl,alt:""},null,8,z)]),s("td",F,[r(e(i.product.title)+" ",1),s("span",q,"數量："+e(i.qty),1)]),s("td",M,"NT$ "+e(l.$cash(i.product.price)),1)]))),128))])]),s("p",U,[r(" 總計金額：$NT "),s("span",W,e(l.$cash(o.order.total)),1)])]),s("div",A,[G,s("ul",H,[s("li",J,[K,s("p",{class:a(["col",o.order.is_paid?"text-success":"text-danger"])},[r(" $ "),s("b",Q,e(l.$cash(Math.round(o.order.total))),1),r(" NTD ")],2)]),s("li",R,[X,s("p",Y,e(o.order.id),1)]),s("li",Z,[$,s("p",ss,e(o.order.time),1)]),l.code?(t(),c("li",os,[es,s("p",ts,e(l.code),1)])):n("",!0),s("li",cs,[ls,s("p",ds,e(o.user.email),1)]),s("li",is,[rs,s("p",as,e(o.user.name),1)]),s("li",ns,[_s,s("p",hs,e(o.user.tel),1)]),s("li",ps,[us,s("p",ms,e(o.user.address),1)]),s("li",gs,[ys,o.order.message?(t(),c("p",fs,e(o.order.message),1)):(t(),c("p",bs,"無"))])]),o.order.is_paid?n("",!0):(t(),c("button",{key:0,type:"submit",class:"btn btn-primary w-100 py-3 mt-5",onClick:d[0]||(d[0]=(...i)=>_.payOrder&&_.payOrder(...i))},"信用卡付款"))])])])],64)}const Ns=u(f,[["render",xs]]);export{Ns as default};
