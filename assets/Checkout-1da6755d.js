import{_ as u}from"./_plugin-vue_export-helper-c27b6911.js";import{g as m,o,c,h as f,b as s,n as a,j as n,e as r,F as h,r as g,t as e}from"./index-4fa0f19a.js";const y={data(){return{order:{},user:{},orderId:"",code:"",isLoading:!1}},methods:{getOrder(){this.isLoading=!0;const l=`https://vue3-course-api.hexschool.io/api/aromamystery-api/order/${this.orderId}`;this.$http.get(l).then(i=>{this.isLoading=!1,i.data.success&&(this.order=i.data.order,this.order.time=new Date(this.order.create_at*1e3).toLocaleString("zh-TW",{hour12:!1}),this.user=this.order.user)})},payOrder(){this.isLoading=!0;const l=`https://vue3-course-api.hexschool.io/api/aromamystery-api/pay/${this.orderId}`;this.$http.post(l).then(i=>{this.isLoading=!1,i.data.success&&this.getOrder()})}},created(){this.orderId=this.$route.params.orderId,this.getOrder()}},x={class:"container",id:"checkout"},b={key:0,class:"row g-0 p-3 text-center"},k={class:"steps row g-0 list-unstyled mb-4"},v=s("li",{class:"col-4"},[s("small",{class:"ls-3 d-block"},"STEP1"),s("span",null,"確認訂單")],-1),w=s("small",{class:"ls-3 d-block"},"STEP2",-1),L=s("span",null,"建立訂單",-1),T=[w,L],N=s("small",{class:"ls-3 d-block"},"STEP3",-1),O=s("span",null,"完成訂單",-1),C=[N,O],E={class:"row g-0 justify-content-between"},I={class:"col-md-6 col-lg-5 px-3 m-0"},S={class:"fs-4 d-flex mb-5"},V={key:0,class:"text-danger"},B={key:1,class:"text-success"},D={class:"table table-warm table-borderless align-middle"},P={class:"tbody"},j={width:"80",class:"ps-0"},z=["src"],F={class:"text-muted"},q={class:"d-block"},M={class:"text-end"},U={class:"text-primary border-top"},W={class:"fs-4"},A={class:"col-md-6 p-4 py-5 p-md-5 bg-white"},G=s("h2",{class:"fs-4 d-flex mb-4"},"訂購資訊",-1),H={class:"list-unstyled"},J={class:"d-flex"},K=s("p",{class:"col-4"},"訂單金額：",-1),Q={class:"fs-5"},R={class:"d-flex"},X=s("p",{class:"col-4 text-nowrap"},"訂單編號：",-1),Y={class:"col"},Z={class:"d-flex"},$=s("p",{class:"col-4"},"訂購時間：",-1),ss={class:"col"},ts={key:0,class:"d-flex"},es=s("p",{class:"col-4"},"優惠券代碼：",-1),os={class:"col"},cs={class:"d-flex"},ls=s("p",{class:"col-4"},"Email：",-1),is={class:"col"},ds={class:"d-flex"},rs=s("p",{class:"col-4"},"收件人姓名：",-1),as={class:"col"},ns={class:"d-flex"},_s=s("p",{class:"col-4"},"聯絡電話",-1),hs={class:"col"},ps={class:"d-flex"},us=s("p",{class:"col-4"},"收件地址：",-1),ms={class:"col"},fs={class:"d-flex"},gs=s("p",{class:"col-4"},"備註：",-1),ys={key:0,class:"col"},xs={key:1,class:"col"};function bs(l,i,ks,vs,t,_){const p=m("Loading");return o(),c(h,null,[f(p,{active:t.isLoading},null,8,["active"]),s("div",x,[t.order.id?(o(),c("div",b,[s("ul",k,[v,s("li",{class:a(["col-4 mx-3",t.order.is_paid?"":"active"])},T,2),s("li",{class:a(["col-4",t.order.is_paid?"active":""])},C,2)])])):n("",!0),s("div",E,[s("div",I,[s("h2",S,[r(" 訂單內容  "),t.order.is_paid?(o(),c("span",B,"(已付款)")):(o(),c("span",V,"(未付款)"))]),s("table",D,[s("tbody",P,[(o(!0),c(h,null,g(t.order.products,d=>(o(),c("tr",{key:d.id},[s("td",j,[s("img",{class:"table-img",src:d.product.imageUrl,alt:""},null,8,z)]),s("td",F,[r(e(d.product.title)+" ",1),s("span",q,"數量："+e(d.qty),1)]),s("td",M,"NT$ "+e(l.$cash(d.product.price)),1)]))),128))])]),s("p",U,[r(" 總計金額：$NT "),s("span",W,e(l.$cash(t.order.total)),1)])]),s("div",A,[G,s("ul",H,[s("li",J,[K,s("p",{class:a(["col",t.order.is_paid?"text-success":"text-danger"])},[r(" $ "),s("b",Q,e(l.$cash(Math.round(t.order.total))),1),r(" NTD ")],2)]),s("li",R,[X,s("p",Y,e(t.order.id),1)]),s("li",Z,[$,s("p",ss,e(t.order.time),1)]),t.code?(o(),c("li",ts,[es,s("p",os,e(t.code),1)])):n("",!0),s("li",cs,[ls,s("p",is,e(t.user.email),1)]),s("li",ds,[rs,s("p",as,e(t.user.name),1)]),s("li",ns,[_s,s("p",hs,e(t.user.tel),1)]),s("li",ps,[us,s("p",ms,e(t.user.address),1)]),s("li",fs,[gs,t.order.message?(o(),c("p",ys,e(t.order.message),1)):(o(),c("p",xs,"無"))])]),t.order.is_paid?n("",!0):(o(),c("button",{key:0,type:"submit",class:"btn btn-primary text-white w-100 py-3 mt-5",onClick:i[0]||(i[0]=(...d)=>_.payOrder&&_.payOrder(...d))},"信用卡付款"))])])])],64)}const Ts=u(y,[["render",bs]]);export{Ts as default};
