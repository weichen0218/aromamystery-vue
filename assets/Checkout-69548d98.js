import{s as u}from"./statusStore-cf1f3c97.js";import{m,g,o as e,c,h as f,b as s,n as a,j as n,e as r,F as h,r as y,t}from"./index-09ee44b4.js";import{_ as b}from"./_plugin-vue_export-helper-c27b6911.js";const x={data(){return{order:{},user:{},orderId:"",isLoading:!1}},computed:{...m(u,["isLoading"])},methods:{getOrder(){this.isLoading=!0;const l=`https://vue3-course-api.hexschool.io/api/aromamystery-api/order/${this.orderId}`;this.$http.get(l).then(i=>{this.isLoading=!1,i.data.success&&(this.order=i.data.order,this.order.time=new Date(this.order.create_at*1e3).toLocaleString("zh-TW",{hour12:!1}),this.user=this.order.user)})},payOrder(){const l=`https://vue3-course-api.hexschool.io/api/aromamystery-api/pay/${this.orderId}`;this.$http.post(l).then(i=>{console.log(i),i.data.success&&this.getOrder()})}},created(){this.orderId=this.$route.params.orderId,console.log(this.order),this.getOrder()}},k={class:"container",id:"checkout"},v={key:0,class:"row g-0 p-3 text-center"},w={class:"steps row g-0 list-unstyled mb-4"},L=s("li",{class:"col-4"},[s("small",{class:"ls-3 d-block"},"STEP1"),s("span",null,"確認訂單")],-1),T=s("small",{class:"ls-3 d-block"},"STEP2",-1),N=s("span",null,"建立訂單",-1),S=[T,N],O=s("small",{class:"ls-3 d-block"},"STEP3",-1),C=s("span",null,"完成訂單",-1),E=[O,C],I={class:"row g-0 justify-content-between"},V={class:"col-md-6 col-lg-5 px-3 m-0"},B={class:"fs-4 d-flex mb-5"},D={key:0,class:"text-danger"},P={key:1,class:"text-success"},j={class:"table table-warm table-borderless align-middle"},z={class:"tbody"},F={width:"80",class:"ps-0"},q=["src"],M={class:"text-muted"},U={class:"d-block"},W={class:"text-end"},A={class:"text-primary border-top"},G={class:"fs-4"},H={class:"col-md-6 p-4 py-5 p-md-5 bg-white"},J=s("h2",{class:"fs-4 d-flex mb-4"},"訂購資訊",-1),K={class:"list-unstyled"},Q={class:"d-flex"},R=s("p",{class:"col-4"},"訂單金額：",-1),X={class:"fs-5"},Y={class:"d-flex"},Z=s("p",{class:"col-4 text-nowrap"},"訂單編號：",-1),$={class:"col"},ss={class:"d-flex"},os=s("p",{class:"col-4"},"訂購時間：",-1),ts={class:"col"},es={key:0,class:"d-flex"},cs=s("p",{class:"col-4"},"優惠券代碼：",-1),ls={class:"col"},is={class:"d-flex"},ds=s("p",{class:"col-4"},"Email：",-1),rs={class:"col"},as={class:"d-flex"},ns=s("p",{class:"col-4"},"收件人姓名：",-1),_s={class:"col"},hs={class:"d-flex"},ps=s("p",{class:"col-4"},"聯絡電話",-1),us={class:"col"},ms={class:"d-flex"},gs=s("p",{class:"col-4"},"收件地址：",-1),fs={class:"col"},ys={class:"d-flex"},bs=s("p",{class:"col-4"},"備註：",-1),xs={key:0,class:"col"},ks={key:1,class:"col"};function vs(l,i,ws,Ls,o,_){const p=g("Loading");return e(),c(h,null,[f(p,{active:o.isLoading},null,8,["active"]),s("div",k,[o.order.id?(e(),c("div",v,[s("ul",w,[L,s("li",{class:a(["col-4 mx-3",o.order.is_paid?"":"active"])},S,2),s("li",{class:a(["col-4",o.order.is_paid?"active":""])},E,2)])])):n("",!0),s("div",I,[s("div",V,[s("h2",B,[r(" 訂單內容  "),o.order.is_paid?(e(),c("span",P,"(已付款)")):(e(),c("span",D,"(未付款)"))]),s("table",j,[s("tbody",z,[(e(!0),c(h,null,y(o.order.products,d=>(e(),c("tr",{key:d.id},[s("td",F,[s("img",{class:"table-img",src:d.product.imageUrl,alt:""},null,8,q)]),s("td",M,[r(t(d.product.title)+" ",1),s("span",U,"數量："+t(d.qty),1)]),s("td",W,"NT$ "+t(l.$cash(d.product.price)),1)]))),128))])]),s("p",A,[r(" 總計金額：$NT "),s("span",G,t(l.$cash(o.order.total)),1)])]),s("div",H,[J,s("ul",K,[s("li",Q,[R,s("p",{class:a(["col",o.order.is_paid?"text-success":"text-danger"])},[r(" $ "),s("b",X,t(l.$cash(Math.round(o.order.total))),1),r(" NTD ")],2)]),s("li",Y,[Z,s("p",$,t(o.order.id),1)]),s("li",ss,[os,s("p",ts,t(o.order.time),1)]),l.code?(e(),c("li",es,[cs,s("p",ls,t(l.code),1)])):n("",!0),s("li",is,[ds,s("p",rs,t(o.user.email),1)]),s("li",as,[ns,s("p",_s,t(o.user.name),1)]),s("li",hs,[ps,s("p",us,t(o.user.tel),1)]),s("li",ms,[gs,s("p",fs,t(o.user.address),1)]),s("li",ys,[bs,o.order.message?(e(),c("p",xs,t(o.order.message),1)):(e(),c("p",ks,"無"))])]),o.order.is_paid?n("",!0):(e(),c("button",{key:0,type:"submit",class:"btn btn-primary text-white w-100 py-3 mt-5",onClick:i[0]||(i[0]=(...d)=>_.payOrder&&_.payOrder(...d))},"信用卡付款"))])])])],64)}const Os=b(x,[["render",vs]]);export{Os as default};
